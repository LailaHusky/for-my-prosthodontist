<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#fff0f5">
<title>A Perfect Restoration ‚ù§Ô∏è</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
    background: #fff0f5;
    overflow: hidden;
  }
  h1 {
    font-size: 2em;
    margin: 0 20px 30px 20px;
    color: #ff1493;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    z-index: 10;
  }
  .container {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    z-index: 10;
  }
  button {
    padding: 15px 30px;
    font-size: 18px;
    cursor: pointer;
    border: none;
    border-radius: 50px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  #yes-button { background-color: #ff69b4; color: white; }
  #no-button { background-color: #f08080; color: white; }

  .floating-icon {
    position: absolute;
    bottom: -50px;
    font-size: 24px;
    pointer-events: none;
    animation: floatUp 5s linear forwards;
    opacity: 0.7;
  }

  @keyframes floatUp {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
  }
</style>
</head>
<body>

<h1 id="question">Will you accept a Full-Mouth Rehab of my heart? üíéü¶∑</h1>

<audio id="bg-music" loop playsinline>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="container">
  <button id="yes-button" onclick="handleYesClick()">Yes ‚ù§Ô∏è</button>
  <button id="no-button" onclick="handleNoClick()">No üò¢</button>
</div>

<script>
let messageIndex = 0;
const music = document.getElementById('bg-music');
const icons = ['‚ù§Ô∏è', 'ü¶∑', 'üíé', '‚ú®', 'üëë'];

const messages = [
  "Wait! Our margins were so closed! üò≠",
  "Don't leave me with a high occlusion! ü¶∑",
  "Is it my vertical dimension? I can change! üìè",
  "I'm a permanent restoration, not a temp! üíç",
  "Don't reject this treatment plan! üìã",
  "I'm losing my retention over you! ü•∫",
  "We have a perfect path of insertion! üíï",
  "Click Yes, or I'll have a total breakdown! üõ†Ô∏è"
];

function playMusic() {
  // Safari unlocks audio on this user-triggered click
  music.play().catch(e => {
    console.log("Audio playback failed. Safari might need one more click interaction.");
  });
}

function createFloatingIcon() {
  const icon = document.createElement('div');
  icon.className = 'floating-icon';
  icon.innerText = icons[Math.floor(Math.random() * icons.length)];
  icon.style.left = Math.random() * 100 + "vw";
  icon.style.animationDuration = (Math.random() * 3 + 3) + "s";
  document.body.appendChild(icon);
  setTimeout(() => icon.remove(), 6000);
}

// Start floating icons immediately
setInterval(createFloatingIcon, 400);

function handleNoClick() {
  // No music here - keep it silent until she says Yes!
  const noButton = document.querySelector('#no-button');
  const yesButton = document.querySelector('#yes-button');
  
  noButton.textContent = messages[messageIndex];
  messageIndex = (messageIndex + 1) % messages.length;

  const currentSize = parseFloat(window.getComputedStyle(yesButton).fontSize);
  if (currentSize < 80) { 
    yesButton.style.fontSize = `${currentSize * 1.2}px`;
    yesButton.style.padding = `${parseFloat(window.getComputedStyle(yesButton).padding) * 1.1}px`;
  }
}

function handleYesClick() {
  // The big reveal: Music, Confetti, and Success Message!
  playMusic();
  
  document.getElementById('question').textContent = "Ideal Esthetics & Function Achieved! ‚ù§Ô∏è";
  
  confetti({
    particleCount: 200,
    spread: 80,
    origin: { y: 0.6 },
    colors: ['#ff69b4', '#ffffff', '#ffd700'] 
  });

  // Redirect after 4 seconds so she can hear the song first
  setTimeout(() => {
    window.location.href = "https://drive.google.com/file/d/1WAOiua_2-YDSZo51gqCgQiyHAWPyygi9/view?usp=sharing";
  }, 4000);
}
</script>

</body>
</html>
